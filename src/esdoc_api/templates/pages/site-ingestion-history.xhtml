<!--*************************************************-->
<!-- Page Mako function extensions                   -->
<!--*************************************************-->
<%namespace file="/master/master.mako" import="*"/>

<%def name="renderIngestCount(ingest)" filter="trim">
    % if ingest.State.Name == 'RUNNING':
        --
    % else:
        ${ingest.Count}
    % endif
</%def>

<!--*************************************************-->
<!-- Master template                                 -->
<!--*************************************************-->
<%inherit file="/master/master.xhtml"/>

<!--*************************************************-->
<!-- Page CSS Declaration                            -->
<!--*************************************************-->

<!--*************************************************-->
<!-- Page JS Declaration                             -->
<!--*************************************************-->
${h.javascript_link('/esdoc/js/site/esdoc-site-ingestion-history.js')}

<!--*************************************************-->
<!-- Page XHTML Declaration                          -->
<!--*************************************************-->
<!-- Ingest History -->
<div class="ui-corner-all">
    <table cellpadding="0" cellspacing="0" border="0"  style="width: 100%;" class="mf-datatable">
        <thead>
            <tr>
                <!-- Data Columns -->
                <th title="Institute">Institute</th>
                <th title="Ingest Source">Source</th>
                <th title="Ingest Feed URL">Feed URL</th>
                <th title="Ingest Date">Date</th>
                <th title="Ingest Count">Count</th>
                <th title="Ingest Status">Status</th>
            </tr>
        </thead>
        <tbody>
            % for item in c.ingest_history:
            <tr class="${item.State.Name}">
                <!-- Data Columns -->
                <td class="center">${item.Endpoint.Institute.Name}</td>
                <td class="center">${item.Endpoint.MetadataSource}</td>
                <td class="center">${item.Endpoint.IngestURL}</td>
                <td class="center">${renderDate(item.StartDateTime)}</td>
                <td class="center">${renderIngestCount(item)}</td>
                <td class="center">${item.State.Name}</td>
            </tr>
            % endfor
        </tbody>
    </table>
</div><!--end Ingest History -->
